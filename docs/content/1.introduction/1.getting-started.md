# Getting Started

This guide will walk you through the basic steps to setup a new [Backrest](https://github.com/garethgeorge/backrest) instance.

## Installation

See the <a href="https://github.com/garethgeorge/backrest" target="_blank">Github README</a> for installation instructions for your platform.

## Terminology

 * **Restic Repo** Backrest uses [restic](https://restic.net) under-the-hood to manage backups. A restic repo is a location where restic will store your backup data, this detail is typically abstracted away from the user by Backrest but is important to understand as it means you have the option to use the restic CLI to interact with snapshots created by Backrest directly if you wish.
 * **Repo** A Backrest repo (called a Repo from here on) is configuration data which identifies a location where your backup data will be stored (forwarded to restic), the credentials that will encrypt your backup data, hooks, and any options needed by backrest to orchestrate your backups.
 * **Plan** A Backrest plan (called a Plan from here on) is configuration data that describes a schedule for taking snapshots, forgetting old snapshots, and running prune operations. Multiple plans can write data to the same Backrest repo.
 * **Operations**
   * A **Backup** creates a restic snapshot and send it to a repo.
   * A **Forget** operation marks old snapshots for deletion but does not remove data from storage.
   * A **Prune** operation removes data from storage that is no longer referenced by any snapshot (see [restic docs on forget and prune](https://restic.readthedocs.io/en/latest/060_forget.html)).
   * A **Restore** operation retrieves files from a snapshot and writes them to a location on disk.

## Configuration

::alert{type="info"}
Once backrest is installed, you can access the web interface at `http://localhost:9898` (or the port you configured). Backrest will immediately prompt you to configure a default user and password (or you may disable authentication if you prefer). Once this is done, you can go on to configure your installation.
::

#### Add a new repository

A Backrest repository is implemented as a restic repository under-the-hood (more on this later). A Repo is a configuration object which identifies a storage location and the credentials that will be used to encrypt snapshots sent to that storage.

The primary properties of a repository are:

 * **Repo Name** A human-readable name for the repository. This is used to identify the repository in the UI and is immutable after creation.

 * **Repo URI** identifies the location where the repo's data is stored. This corresponds to the URI used by restic. See [the restic docs](https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html) for the repo types that restic supports. For common storage providers this looks like:

     * Backblaze: `b2:yourbucket` or `b2:yourbucket/pathprefix`
     * AWS S3 (or S3 compatible storage): `s3:yourbucket` or `s3:yourbucket/pathprefix`
     * Local path: `/mnt/backupdisk/repo1`.
     * Rclone remote: `rclone:remote:path`. See the [rclone docs](https://rclone.org/docs/) for more information. To use rclone remotes, you must first install and configure rclone and ensure that the rclone config (e.g. `~/.config/rclone/rclone.conf`) is available to the backrest process.

 * **Environment Variables** environment variables provide additional configuration to restic (typically related to credentials for the storage provider). Common examples are 
 
     * For S3 storage set: `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` 
     * For B2 storage set: `B2_ACCOUNT_ID` and `B2_ACCOUNT_KEY`

 * **Flags** additional flags to provide to restic. At the moment only presence flags are supported. Common usage might include:
 
     * `-o sftp.ssh_argument="-i /path/to/key"` will pass an SSH key to restic for use with SFTP repositories.
     * `--force` will force rereading all files on each backup rather than relying on metadata (e.g. last modified time). This can be much slower.
     * `--one-file-system` will prevent restic crossing filesystem boundaries.
 * **Hooks** are actions triggered by backup lifecycle events, repo hooks will apply to actions run by any plan that writes to the repo. Hooks can also be configured at the plan level. See the [hooks documentation](/docs/hooks) for more information.



